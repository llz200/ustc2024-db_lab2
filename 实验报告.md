<div style="text-align:center;font-size:2em;font-weight:bold">中国科学技术大学计算机学院</div>

<div style="text-align:center;font-size:2em;font-weight:bold">《数据库系统实验报告》</div>







<img src="./picture/logo.png" style="zoom: 50%;" />





<div style="display: flex;flex-direction: column;align-items: center;font-size:2em">
<div>
<p>实验题目：学籍管理系统</p>
<p>学生姓名：李乐禛</p>
<p>学生学号：PB21111716</p>
<p>完成时间：2024年5月5日</p>
</div>
</div>







<div style="page-break-after:always"></div>

## 需求分析

> 本次实验我选择的课题是学籍管理系统。
>
> 在各个学校对学籍管理的场景下，可以应用这套学籍管理系统。
>
> 所需的功能如下：
>
> 1.添加删除学生，录入基本信息，包括学生相片。
>
> 2.专业变更等基本信息变更。
>
> 3.奖惩情况管理，为学生添加删除奖项。
>
> 4.所选课程管理，添加或删除某名学生的选课。
>
> 5.课程成绩管理，修改选课成绩。

## 总体设计

#### 系统模块结构

>  本次实验我的代码分前端和后端两大模块。

#### 系统工作流程

>  打开主窗口，有21个选项可选。
>
>  ![1714838104058](C:\Users\leelinz\AppData\Roaming\Typora\typora-user-images\1714838104058.png)
>
>  在查看全部的几个选项时，会直接出现结果表格。
>
>  ![1714838895291](C:\Users\leelinz\AppData\Roaming\Typora\typora-user-images\1714838895291.png)
>
>  选择要输入内容的选项时，则会弹出弹窗。
>
>  ![1714838944916](C:\Users\leelinz\AppData\Roaming\Typora\typora-user-images\1714838944916.png)
>
>  如果有内容不符则会报错。
>
>  ![1714838995771](C:\Users\leelinz\AppData\Roaming\Typora\typora-user-images\1714838995771.png)
>
>  ![1714839020011](C:\Users\leelinz\AppData\Roaming\Typora\typora-user-images\1714839020011.png)
>
>  成功执行后会弹窗。
>
>  ![1714839143181](C:\Users\leelinz\AppData\Roaming\Typora\typora-user-images\1714839143181.png)
>
>  选择重置数据库时会DROP所有表格和函数然后重新生成，方便测试。

#### 数据库设计

> ER图如下：
>
> ![1714489177748](C:\Users\leelinz\AppData\Roaming\Typora\typora-user-images\1714489177748.png)
>
> 模式分解如下：
>
>
>
> 存储过程设计思路：
>
> 本实验我设计了两个存储过程，用于对学号，课程号两个有外键约束的主键的修改。
>
> 触发器设计思路：
>
> 本实验我设计了数个触发器，用于删除的实现，保证外键约束不被破坏。
>
> 函数设计思路：
>
> 本实验我设计了一个函数，用于计算学生当前已获得的总学分。

## 核心代码解析（可改名为对应模块，如后端实现）

#### 仓库地址

> [ustc2024-db_lab2/README.md at main · llz200/ustc2024-db_lab2 (github.com)](https://github.com/llz200/ustc2024-db_lab2)

#### 目录

> C:.
> │  README.md
> │  实验报告.md
> │
> ├─picture
> │      11z.png
> │      logo.png
> │
> └─src
> ​    │  classes.py			-------有关课程的后端代码
> ​    │  init_db.py			-------初始化数据库
> ​    │  main.py				-------主代码，链接数据库，创建游标对象，显示主窗口
> ​    │  prizes.py			-------有关奖项的后端代码
> ​    │  punishments.py		-------有关惩罚的后端代码
> ​    │  selects.py			-------有关查询的后端代码
> ​    │  students.py			-------有关学生的后端代码
> ​    │  test.py				-------测试用文件，主函数不调用
> ​    │  Window.py			-------全部前端代码
> ​    │
> ​    └─__pycache__
> ​            classes.cpython-38.pyc
> ​            init_db.cpython-38.pyc
> ​            prizes.cpython-38.pyc
> ​            punishments.cpython-38.pyc
> ​            selects.cpython-38.pyc
> ​            students.cpython-38.pyc
> ​            Window.cpython-38.pyc

#### 标题1

> 分为若干个标题，以一定逻辑顺序讲解代码，如按ER图实体、关系讲解数据库建模代码，按存储过程、触发器分类讲解代码、按前端实现、接口等讲解前端代码
>
> 注意不要无脑粘贴代码，选取具有代表性的代码讲解，并注明文件来源，如首行注释: // backend\models.py

## 实验与测试

#### 依赖

> PyQt6库、pymysql库、python3.8.8

#### 部署

> ```
> python ./src/main.py
> ```
>
> 使用python语句直接运行main.py即可

#### 实验结果

> 如增删改查、验证存储过程、函数、触发器、文件管理

## 参考

> [PyQt6 实战：PyQt6 布局详细用法，构建邮件发送应用程序实例，轻松管理电子邮件 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/673635457)
>
> [PyMySQL documentation — PyMySQL 0.7.2 documentation](https://pymysql.readthedocs.io/en/latest/)
>
> [PyQt6 (unogeeks.com)](https://unogeeks.com/pyqt6/)